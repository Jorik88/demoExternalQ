#### Сервис предназначен для вывода средств на карту клиента, проверку баланса ####

Для вывода средств реализован метод ``transferExternal()``, в котором для начала нужно выполнить проверку 
номера карточки на которую будет вывод.Если с этой карточки деньги не вводились => запретить вывод. За проверку
отвечает метод ``validateCardData()``
Далее сам перевод в методе ``transfer()``, нужно сформировать данные для отправки и отправить запрос по адресу :
https://api.qiwi.com/xml/topup.jsp ,запрос передаётся в формате `xml`.В ответ получим данные тоже в формате `xml`,
нужно выполнить проверку => если в ответе нет нода ``payment``, это означает что произошла какая-то ошибка и перевод неудался,
если нод ``payment`` присуцтвует, то все хорошо и мы выполняем дополнительную проверку ответа и возвращаем из метода ``id``
транзакции.

Далее с переодичностью указанной в пропертях вызывается метод ``getTransactionStatus()``, который отправляет
сформированный запрос в систему Qiwi для получения статуса платежа, при получении ответа нужно выставить статус операции

### СТАТУСЫ ПЛАТЕЖЕЙ ###  

Платеж в статусе *PROCESSED*  

- payment status='60'  
- final-status='true'


Платеж в статусе WAITING

- payment status= 50 - 59  
- final-status='false'
- если в ответе нет нода payment то считаем временной,не фатальной ошибкой и ставим статус *WAITING*


Платеж в статусе *FAILED*
- все остальное считаем что платеж не прошел


Для проверки баланса необходимо отправить запрос в систему Qiwi, взапросе нужно передать `password`, `terminal-id`,
`<request-type>ping</request-type>`.
В ответе получим баланс по всем валютам. => 

```xml 
<response>
  <result-code fatal="false">0</result-code>
    <balances>
      <balance code="428">100.00</balance>
      <balance code="643">200.26</balance>
      <balance code="840">300.00</balance>
    </balances>
</response>
```